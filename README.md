 # fefu-yii2-test-task
***
>Тестовое задание на знание фреймфорка Yii2 в ДВФУ.
***
## Постановка задачи
В компании заказчика очень любят проводить собрания. В течение одного дня может быть проведено несколько десятков собраний.
Каждое собрание имеет время начала, с точностью до минуты, и планируемое время окончания. Собрания всегда проводятся в пределах одного рабочего дня.
В каждом собрании принимает участие произвольный набор сотрудников компании.
Интервалы времени проведения собраний могут пересекаться, и так происходит часто. В один момент времени сотрудник может присутствовать только на одном собрании.
## Задача
Создать сервис для построения такого расписания собраний заданного сотрудника, при котором он сможет посетить максимальное количество собраний на указанную дату.
Сервис должен быть реализован, как REST API с операциями CRUD для собраний и сотрудников. Плюс, метод для построения расписания.

>Задача со звёздочкой: построить оптимальный алгоритм построения расписания собраний.
***
## Стэк
- PHP = ^8.3.7
- MySQL = ^8.3.0
- Yii2 = ^2.0.45
***
## Установка
Установить PHP, Composer и MySQL.
Склонировить репозиторий:
```bash
git clone https://github.com/ihopes0/fefu-yii2-test-task.git
```
Установить все зависимости:
```bash
cd fefu-yii2-test-task; \
composer install
```
Поднять БД и добавить подключение в common/config/main-local.php.
```php
return [
    'components' => [
        'db' => [
            'class' => \yii\db\Connection::class,
            'dsn' => 'mysql:host=localhost;dbname=YOUR_DB_NAME',
            'username' => 'root',
            'password' => '',
            'charset' => 'utf8',
        ],
        // ...
    ],
    // ...
];
```
Провести миграции, сгенерируются демо данные пользователей и встреч:
```bash
php yii migrate/up
```
Поднять встроенный PHP сервер:
```bash
php -S localhost:8888 -t frontend/web
```
***
## API
### User
GET /user - получить первые 20 пользователей

GET /user?page=NUM - получить 20 пользователей на странице NUM

GET /user?expand=meetups - получить 20 пользователей с их расписанием

GET /user/{id} - получить одного пользователя по id

POST /user - добавить нового пользователя

POST /user/create-schedule?id=IDS&day=DAY - составить расписание для пользователя или пользователей, где IDS - это строка с id пользователей через запятую ("1,2,3,4"), для всех - all; DAY - дата в формате y-m-d (24-10-01)

PATCH, PUT /user/{id} - обновить данные пользователя по id

DELETE /user/{id} - удалить пользователя с id

### Meetings
GET /meetup - получить первые 20 встреч

GET /meetup?page=NUM - получить 20 встреч на странице NUM

GET /meetup?expand=users - получить 20 встреч с их 
 участниками

GET /meetup/{id} - получить одну встречу по id

POST /meetup - добавить новую встречу

PATCH, PUT /meetup/{id} - обновить данные встречи по id

DELETE /meetup/{id} - удалить встречу с id
***
## Создание расписания через CLI
```bash
php yii schedule/create-for USERS_ID DATE
```
USERS_ID - id пользователей через запятую, all для всех
DATE - дата формата y-m-d (24-10-01)
